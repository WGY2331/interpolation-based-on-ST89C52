C51 COMPILER V9.54   MAIN                                                                  06/03/2020 13:34:47 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN C:\Users\15027\Desktop\chabu\main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.exe C:\Users\15027\Desktop\chabu\main.c

line level    source

   1          #include<reg52.h>
   2          #include<intrins.h>
   3              int init();    //声明初始化函数
   4              int write_com(unsigned char);//声明写命令函数
   5              int write_date(unsigned char);//声明写数据函数
   6              int delay(unsigned char);//声明延迟函数
   7              unsigned char x;
   8              sbit RS = P3^5;
   9              sbit RW = P3^6;
  10              sbit EN = P3^4;
  11              unsigned char code table[]="Wu Chunxiao";
  12              unsigned char code table1[]="I love you!";
  13          
  14          void main(void)//主函数
  15          {
  16   1          init();
  17   1          write_com(0x80);//位置
  18   1          for(x=0;x<11;x++)
  19   1          {
  20   2               write_date(table[x]);
  21   2              delay(150);
  22   2          }
  23   1          write_com(0x80+0x40);
  24   1          for(x=0;x<11;x++)
  25   1          {
  26   2               write_date(table1[x]);
  27   2              delay(150);
  28   2          }
  29   1          while(1);
  30   1          
  31   1      }
  32          
  33          int init()//初始化函数体
  34          {
  35   1          EN = 0;
  36   1          write_com(0X38);//设置16*2显示，5*7点阵，8位数据接口
  37   1          write_com(0X0C);//设置开显示，不显示光标
  38   1          write_com(0X06);//写一个字符时，整屏右移
  39   1          write_com(0X01);//显示清零
  40   1          return 0;
  41   1      }
  42          
  43          int write_com(unsigned char com)//写命令的函数体
  44          {
  45   1          RS = 0;
  46   1          RW = 0;
  47   1          P0 = com;
  48   1          _nop_();_nop_();_nop_();_nop_();
  49   1          EN = 1;
  50   1          _nop_();_nop_();_nop_();_nop_();
  51   1          EN = 0;
  52   1          return 0;
  53   1      }
  54          
  55          int write_date(unsigned char date)//写数据的函数体
C51 COMPILER V9.54   MAIN                                                                  06/03/2020 13:34:47 PAGE 2   

  56          {
  57   1          RS = 1;
  58   1          RW = 0;
  59   1          P0 = date;
  60   1          _nop_();_nop_();_nop_();_nop_();
  61   1          EN = 1;
  62   1          _nop_();_nop_();_nop_();_nop_();
  63   1          EN = 0;
  64   1          return 0;
  65   1      }
  66          
  67          int delay(unsigned char xms)
  68          {
  69   1          unsigned char x,y;
  70   1          for(x=xms;x>0;x--)
  71   1              for(y=110;y>0;y--);
  72   1          return 0;
  73   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    156    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
