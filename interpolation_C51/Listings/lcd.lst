C51 COMPILER V9.54   LCD                                                                   06/03/2020 15:58:59 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\lcd.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE code\lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -lcd.lst) OBJECT(.\Objects\lcd.obj)

line level    source

   1          #include"lcd.h"
   2          #include"key.h"
   3          
   4          unsigned char code table[]="0123456789abcdef";
   5          //unsigned char code table1[]="I love you!";
   6          
   7          
   8          
   9          void display()//主函数
  10          {
  11   1              //uchar x;
  12   1              
  13   1              uchar IN = P3;//判断有无按键输入
  14   1              
  15   1              lcd_wcom(0x80);//位置
  16   1              
  17   1              //lcd_wcom(0x80 + 0x40);
  18   1              
  19   1              if(~IN & 0x0f){ 
  20   2                      uchar KeyValue=KeyScan();
  21   2                      lcd_wdata(table[KeyValue]);
  22   2              }
  23   1      
  24   1      }
  25          
  26          void lcd_init()//初始化函数体
  27          {
  28   1              EN = 0;
  29   1              delay(5);
  30   1              lcd_wcom(0X38);//设置16*2显示，5*7点阵，8位数据接口
  31   1              delay(5);
  32   1              lcd_wcom(0X0C);//设置开显示，不显示光标
  33   1              delay(5);
  34   1              lcd_wcom(0X06);//写一个字符时，整屏右移
  35   1              delay(5);
  36   1              lcd_wcom(0X01);//显示清零
  37   1      }
  38          
  39          void lcd_wcom(uchar com)//写命令的函数体
  40          {
  41   1              RS = 0;
  42   1              RW = 0;
  43   1              P0 = com;
  44   1              delay(5);
  45   1              EN = 1;
  46   1              delay(5);
  47   1              EN = 0;
  48   1      }
  49          
  50          void lcd_wdata(uchar date)//写数据的函数体
  51          {
  52   1              RS = 1;
  53   1              RW = 0;
  54   1              P0 = date;
C51 COMPILER V9.54   LCD                                                                   06/03/2020 15:58:59 PAGE 2   

  55   1              delay(5);
  56   1              EN = 1;
  57   1              delay(5);
  58   1              EN = 0;
  59   1      }
  60          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    114    ----
   CONSTANT SIZE    =     17    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
